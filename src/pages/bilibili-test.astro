---
import { fetchBilibiliPopularAnime, fetchBilibiliChineseAnime } from "../utils/bilibili-api";

// 测试B站API
const popularAnime = await fetchBilibiliPopularAnime();
const chineseAnime = await fetchBilibiliChineseAnime();

console.log("热门番剧数量:", popularAnime.length);
console.log("国创数量:", chineseAnime.length);
---

<html>
<head>
    <title>B站API测试</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>B站API测试页面</h1>
    
    <h2>热门番剧 (前5个)</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
        {popularAnime.slice(0, 5).map(anime => (
            <div style="border: 1px solid #ccc; padding: 10px; border-radius: 8px;">
                <img src={anime.cover} alt={anime.title} style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px;" />
                <h3 style="margin: 10px 0 5px 0; font-size: 14px;">{anime.title}</h3>
                <p style="font-size: 12px; color: #666; margin: 0;">{anime.description}</p>
                <p style="font-size: 12px; color: #888; margin: 5px 0 0 0;">{anime.year} | {anime.studio}</p>
                <p style="font-size: 12px; color: #888; margin: 0;">类型: {anime.genre.join(", ")}</p>
            </div>
        ))}
    </div>
    
    <h2>国创 (前5个)</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
        {chineseAnime.slice(0, 5).map(anime => (
            <div style="border: 1px solid #ccc; padding: 10px; border-radius: 8px;">
                <img src={anime.cover} alt={anime.title} style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px;" />
                <h3 style="margin: 10px 0 5px 0; font-size: 14px;">{anime.title}</h3>
                <p style="font-size: 12px; color: #666; margin: 0;">{anime.description}</p>
                <p style="font-size: 12px; color: #888; margin: 5px 0 0 0;">{anime.year} | {anime.studio}</p>
                <p style="font-size: 12px; color: #888; margin: 0;">类型: {anime.genre.join(", ")}</p>
            </div>
        ))}
    </div>
    
    <div style="margin-top: 40px; padding: 20px; background: #f5f5f5; border-radius: 8px;">
        <h3>API状态</h3>
        <p>热门番剧数量: {popularAnime.length}</p>
        <p>国创数量: {chineseAnime.length}</p>
        <p>总计: {popularAnime.length + chineseAnime.length}</p>
    </div>
</body>
</html>
